<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/equipamentos.css">
    <title>Equipamentos</title>
</head>
<body>
    <header>
        <div class="top-right">
            <a href="minhaconta.html" class="button">Minha Conta</a>
        </div>
        <img src="../assets/logoinicial.PNG" alt="logo" class="logo">
        <nav>
            <a href="quemsomos.html">Quem somos</a>
            <div class="dropdown">
                <a href="equipamentos.html" class="dropbtn">Produtos</a>
                <div class="dropdown-content">
                    <a href="#">Cadeiras de rodas</a>
                    <a href="#">Andarilhos</a>
                    <a href="#">Bengalas</a>
                    <a href="#">Acessórios auxiliares</a>
                    <a href="#">Camas hospitalares</a>
                    <a href="#">Poltronas hospitalares</a>
                    <a href="#">Almofadas ortopédicas</a>
                </div>
            </div>
            <a href="servicos.html">Serviços</a>
            <a href="atendimento.html">Atendimento</a>
            <a href="login.html">Sair</a>
        </nav>
    </header>
    <main>
        <section id="productList">
            <h2>Produtos Disponíveis</h2>
            <div id="products" class="row-container">
                <!-- Lista de produtos será preenchida dinamicamente -->
            </div>
        </section>
    </main>
    <footer id="footer" class="footer-container">
        <div class="container">
            <div class="footer-column">
                <div class="footer-info">
                    <h4>APOIO AO CLIENTE</h4>
                    <p>+351 217 151 606 / +351 219 890 697</p>
                    <p>Chamada para a rede fixa nacional</p>
                </div>
                <div class="footer-links">
                    <p><a href="#">POLÍTICA DE PRIVACIDADE</a></p>
                    <p><a href="#">TERMOS E CONDIÇÕES</a></p> 
                    <p><a href="#">LIVRO DE RECLAMAÇÕES</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                &copy; 2024 Recomeçar Equipamentos Ortopédicos. Todos os direitos reservados.
            </div>
        </div>
    </footer>
    <script>
        async function makeRequest(url) {
            try {
                const response = await fetch(url);
                return await response.json();
            } catch (error) {
                console.error('Erro ao fazer requisição:', error);
                throw error;
            }
        }

        async function fillProductList() {
            const productListElement = document.getElementById('products');
            try {
                const products = await makeRequest('https://localhost:7109/api/Produtos/GetProdutos');
                productListElement.innerHTML = '';

                products.forEach(product => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.setAttribute('data-id', product.id);

                const img = document.createElement('img');
                img.src = 'https://localhost:7101/Produtoes' + product.image;
                img.alt = product.nomeProduto;
                img.style.width = '200px';
                img.style.height = '200px';

                const cardBody = document.createElement('div');
                cardBody.classList.add('card-body');

                const title = document.createElement('h5');
                title.classList.add('card-title');
                title.textContent = product.nomeProduto;

                const price = document.createElement('p');
                price.classList.add('card-text');
                price.textContent = `Preço: ${product.preco}`;

                const description = document.createElement('p');
                description.classList.add('card-text');
                description.textContent = product.descricao;

                const buyButton = document.createElement('button');
                buyButton.textContent = 'Comprar';
                buyButton.classList.add('buy-button');

                // Adicionando evento de clique ao card
                card.addEventListener('click', function() {
                    window.location.href = `details.html?id=${product.produtoId}`;
                });

                    // Adicionar elementos ao card
                    card.appendChild(img);
                    card.appendChild(cardBody);
                    cardBody.appendChild(title);
                    cardBody.appendChild(price);
                    cardBody.appendChild(description);
                    cardBody.appendChild(buyButton);

                    // Adicionar o card à lista de produtos
                    productListElement.appendChild(card);
                });

            } catch (error) {
                console.error('Erro ao preencher lista de produtos:', error);
            }
        }

        window.addEventListener('load', fillProductList);
    </script>
</body>
</html>
